### YamlMime:UniversalReference
items:
  - uid: '@azure/arm-sql.ExtendedServerBlobAuditingPolicy'
    name: ExtendedServerBlobAuditingPolicy
    fullName: ExtendedServerBlobAuditingPolicy
    children:
      - '@azure/arm-sql.ExtendedServerBlobAuditingPolicy.auditActionsAndGroups'
      - '@azure/arm-sql.ExtendedServerBlobAuditingPolicy.id'
      - '@azure/arm-sql.ExtendedServerBlobAuditingPolicy.isAzureMonitorTargetEnabled'
      - '@azure/arm-sql.ExtendedServerBlobAuditingPolicy.isStorageSecondaryKeyInUse'
      - '@azure/arm-sql.ExtendedServerBlobAuditingPolicy.name'
      - '@azure/arm-sql.ExtendedServerBlobAuditingPolicy.predicateExpression'
      - '@azure/arm-sql.ExtendedServerBlobAuditingPolicy.retentionDays'
      - '@azure/arm-sql.ExtendedServerBlobAuditingPolicy.state'
      - '@azure/arm-sql.ExtendedServerBlobAuditingPolicy.storageAccountAccessKey'
      - '@azure/arm-sql.ExtendedServerBlobAuditingPolicy.storageAccountSubscriptionId'
      - '@azure/arm-sql.ExtendedServerBlobAuditingPolicy.storageEndpoint'
      - '@azure/arm-sql.ExtendedServerBlobAuditingPolicy.type'
    langs:
      - typeScript
    type: interface
    summary: <span data-ttu-id="6b180-101">扩展的服务器 blob 审核策略。</span><span class="sxs-lookup"><span data-stu-id="6b180-101">An extended server blob auditing policy.</span></span>
    extends:
      name: '@azure/arm-sql.ProxyResource'
    package: '@azure/arm-sql'
  - uid: '@azure/arm-sql.ExtendedServerBlobAuditingPolicy.auditActionsAndGroups'
    name: auditActionsAndGroups
    fullName: auditActionsAndGroups
    children: []
    langs:
      - typeScript
    type: property
    summary: |
      <span data-ttu-id="6b180-102">指定要审核操作组和操作。</span><span class="sxs-lookup"><span data-stu-id="6b180-102">Specifies the Actions-Groups and Actions to audit.</span></span>
      <span data-ttu-id="6b180-103">一组建议的操作组，使用以下组合-这将审核所有查询和执行针对数据库，以及成功和失败的登录名的存储的过程：</span><span class="sxs-lookup"><span data-stu-id="6b180-103">The recommended set of action groups to use is the following combination - this will audit all the queries and stored procedures executed against the database, as well as successful and failed logins:</span></span>

      <span data-ttu-id="6b180-104">BATCH_COMPLETED_GROUP，SUCCESSFUL_DATABASE_AUTHENTICATION_GROUP，FAILED_DATABASE_AUTHENTICATION_GROUP。</span><span class="sxs-lookup"><span data-stu-id="6b180-104">BATCH_COMPLETED_GROUP, SUCCESSFUL_DATABASE_AUTHENTICATION_GROUP, FAILED_DATABASE_AUTHENTICATION_GROUP.</span></span>

      <span data-ttu-id="6b180-105">上面的组合也是启用审核从 Azure 门户时，默认情况下配置的集。</span><span class="sxs-lookup"><span data-stu-id="6b180-105">This above combination is also the set that is configured by default when enabling auditing from the Azure portal.</span></span>

      <span data-ttu-id="6b180-106">若要审核的支持的操作组 (请注意： 选择包含您的审核需要的仅在特定组。</span><span class="sxs-lookup"><span data-stu-id="6b180-106">The supported action groups to audit are (note: choose only specific groups that cover your auditing needs.</span></span> <span data-ttu-id="6b180-107">使用不必要的组可能会导致大量审核记录）：</span><span class="sxs-lookup"><span data-stu-id="6b180-107">Using unnecessary groups could lead to very large quantities of audit records):</span></span>

      <span data-ttu-id="6b180-108">APPLICATION_ROLE_CHANGE_PASSWORD_GROUP BACKUP_RESTORE_GROUP DATABASE_LOGOUT_GROUP DATABASE_OBJECT_CHANGE_GROUP DATABASE_OBJECT_OWNERSHIP_CHANGE_GROUP DATABASE_OBJECT_PERMISSION_CHANGE_GROUP DATABASE_OPERATION_GROUP DATABASE_PERMISSION_CHANGE_GROUP DATABASE_PRINCIPAL_CHANGE_GROUP DATABASE_PRINCIPAL_IMPERSONATION_GROUP DATABASE_ROLE_MEMBER_CHANGE_GROUP FAILED_DATABASE_AUTHENTICATION_GROUP SCHEMA_OBJECT_ACCESS_GROUP SCHEMA_OBJECT_CHANGE_GROUP SCHEMA_OBJECT_OWNERSHIP_CHANGE_GROUP SCHEMA_OBJECT_PERMISSION_CHANGE_GROUP SUCCESSFUL_DATABASE_AUTHENTICATION_GROUP USER_CHANGE_PASSWORD_GROUP BATCH_STARTED_GROUP BATCH_COMPLETED_GROUP</span><span class="sxs-lookup"><span data-stu-id="6b180-108">APPLICATION_ROLE_CHANGE_PASSWORD_GROUP BACKUP_RESTORE_GROUP DATABASE_LOGOUT_GROUP DATABASE_OBJECT_CHANGE_GROUP DATABASE_OBJECT_OWNERSHIP_CHANGE_GROUP DATABASE_OBJECT_PERMISSION_CHANGE_GROUP DATABASE_OPERATION_GROUP DATABASE_PERMISSION_CHANGE_GROUP DATABASE_PRINCIPAL_CHANGE_GROUP DATABASE_PRINCIPAL_IMPERSONATION_GROUP DATABASE_ROLE_MEMBER_CHANGE_GROUP FAILED_DATABASE_AUTHENTICATION_GROUP SCHEMA_OBJECT_ACCESS_GROUP SCHEMA_OBJECT_CHANGE_GROUP SCHEMA_OBJECT_OWNERSHIP_CHANGE_GROUP SCHEMA_OBJECT_PERMISSION_CHANGE_GROUP SUCCESSFUL_DATABASE_AUTHENTICATION_GROUP USER_CHANGE_PASSWORD_GROUP BATCH_STARTED_GROUP BATCH_COMPLETED_GROUP</span></span>

      <span data-ttu-id="6b180-109">这是包含所有 sql 语句的组和存储的过程对数据库执行，因为这会导致重复的审核日志不应与其他组结合使用。</span><span class="sxs-lookup"><span data-stu-id="6b180-109">These are groups that cover all sql statements and stored procedures executed against the database, and should not be used in combination with other groups as this will result in duplicate audit logs.</span></span>

      <span data-ttu-id="6b180-110">有关详细信息，请参阅[数据库级别审核操作组](https://docs.microsoft.com/en-us/sql/relational-databases/security/auditing/sql-server-audit-action-groups-and-actions#database-level-audit-action-groups)。</span><span class="sxs-lookup"><span data-stu-id="6b180-110">For more information, see [Database-Level Audit Action Groups](https://docs.microsoft.com/en-us/sql/relational-databases/security/auditing/sql-server-audit-action-groups-and-actions#database-level-audit-action-groups).</span></span>

      <span data-ttu-id="6b180-111">对于数据库审核策略，特定操作也可以是指定 （请注意，不能为服务器审核策略指定的操作）。</span><span class="sxs-lookup"><span data-stu-id="6b180-111">For Database auditing policy, specific Actions can also be specified (note that Actions cannot be specified for Server auditing policy).</span></span> <span data-ttu-id="6b180-112">若要审核的受支持的操作包括：选择更新插入删除执行接收引用</span><span class="sxs-lookup"><span data-stu-id="6b180-112">The supported actions to audit are: SELECT UPDATE INSERT DELETE EXECUTE RECEIVE REFERENCES</span></span>

      <span data-ttu-id="6b180-113">用于定义要审核的操作的一般形式为: {action} ON {对象} 的 {主体}</span><span class="sxs-lookup"><span data-stu-id="6b180-113">The general form for defining an action to be audited is: {action} ON {object} BY {principal}</span></span>

      <span data-ttu-id="6b180-114">请注意，<object>采用上述格式可以指像表、 视图或存储的过程或整个数据库或架构的对象。</span><span class="sxs-lookup"><span data-stu-id="6b180-114">Note that <object> in the above format can refer to an object like a table, view, or stored procedure, or an entire database or schema.</span></span> <span data-ttu-id="6b180-115">对于后一种情况下，窗体数据库:: {db_name} 和架构:: {schema_name}，分别使用。</span><span class="sxs-lookup"><span data-stu-id="6b180-115">For the latter cases, the forms DATABASE::{db_name} and SCHEMA::{schema_name} are used, respectively.</span></span>

      <span data-ttu-id="6b180-116">例如：选择上 dbo.myTable 公共 select 上 DATABASE::myDatabase 上由公共 SCHEMA::mySchema 公共 select</span><span class="sxs-lookup"><span data-stu-id="6b180-116">For example: SELECT on dbo.myTable by public SELECT on DATABASE::myDatabase by public SELECT on SCHEMA::mySchema by public</span></span>

      <span data-ttu-id="6b180-117">有关详细信息，请参阅[数据库级别审核操作](https://docs.microsoft.com/en-us/sql/relational-databases/security/auditing/sql-server-audit-action-groups-and-actions#database-level-audit-actions)</span><span class="sxs-lookup"><span data-stu-id="6b180-117">For more information, see [Database-Level Audit Actions](https://docs.microsoft.com/en-us/sql/relational-databases/security/auditing/sql-server-audit-action-groups-and-actions#database-level-audit-actions)</span></span>
    optional: true
    syntax:
      content: 'auditActionsAndGroups?: string[]'
      return:
        type:
          - 'string[]'
    package: '@azure/arm-sql'
  - uid: '@azure/arm-sql.ExtendedServerBlobAuditingPolicy.id'
    name: id
    fullName: id
    children: []
    langs:
      - typeScript
    type: property
    summary: |-
      <span data-ttu-id="6b180-118">资源 ID。</span><span class="sxs-lookup"><span data-stu-id="6b180-118">Resource ID.</span></span>
      <span data-ttu-id="6b180-119">**注意：此属性将不序列化。它仅可以由服务器填充。**</span><span class="sxs-lookup"><span data-stu-id="6b180-119">**NOTE: This property will not be serialized. It can only be populated by the server.**</span></span>
    optional: true
    syntax:
      content: 'id?: undefined | string'
      return:
        type:
          - undefined | string
    package: '@azure/arm-sql'
  - uid: '@azure/arm-sql.ExtendedServerBlobAuditingPolicy.isAzureMonitorTargetEnabled'
    name: isAzureMonitorTargetEnabled
    fullName: isAzureMonitorTargetEnabled
    children: []
    langs:
      - typeScript
    type: property
    summary: |
      <span data-ttu-id="6b180-120">指定是否将审核事件发送到 Azure Monitor。</span><span class="sxs-lookup"><span data-stu-id="6b180-120">Specifies whether audit events are sent to Azure Monitor.</span></span>
      <span data-ttu-id="6b180-121">若要将事件发送到 Azure Monitor 中，为已启用或 IsAzureMonitorTargetEnabled 为 true，则指定省/直辖市。</span><span class="sxs-lookup"><span data-stu-id="6b180-121">In order to send the events to Azure Monitor, specify 'State' as 'Enabled' and 'IsAzureMonitorTargetEnabled' as true.</span></span>
      <span data-ttu-id="6b180-122">在使用 REST API 配置审核，应该还创建与在数据库上的 SQLSecurityAuditEvents 诊断日志类别的诊断设置。</span><span class="sxs-lookup"><span data-stu-id="6b180-122">When using REST API to configure auditing, Diagnostic Settings with 'SQLSecurityAuditEvents' diagnostic logs category on the database should be also created.</span></span>
      <span data-ttu-id="6b180-123">请注意，对于服务器级别审核，应使用作为 {databaseName} 的 'master' 数据库。</span><span class="sxs-lookup"><span data-stu-id="6b180-123">Note that for server level audit you should use the 'master' database as {databaseName}.</span></span>

      <span data-ttu-id="6b180-124">设置诊断设置 URI 的格式：PUT https://management.azure.com/subscriptions/{subscriptionId}/resourceGroups/{resourceGroup}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/providers/microsoft.insights/diagnosticSettings/{settingsName}?api-version=2017-05-01-preview</span><span class="sxs-lookup"><span data-stu-id="6b180-124">Diagnostic Settings URI format: PUT https://management.azure.com/subscriptions/{subscriptionId}/resourceGroups/{resourceGroup}/providers/Microsoft.Sql/servers/{serverName}/databases/{databaseName}/providers/microsoft.insights/diagnosticSettings/{settingsName}?api-version=2017-05-01-preview</span></span>

      <span data-ttu-id="6b180-125">有关详细信息，请参阅[诊断设置 REST API](https://go.microsoft.com/fwlink/?linkid=2033207)或[诊断设置 PowerShell](https://go.microsoft.com/fwlink/?linkid=2033043)</span><span class="sxs-lookup"><span data-stu-id="6b180-125">For more information, see [Diagnostic Settings REST API](https://go.microsoft.com/fwlink/?linkid=2033207) or [Diagnostic Settings PowerShell](https://go.microsoft.com/fwlink/?linkid=2033043)</span></span>
    optional: true
    syntax:
      content: 'isAzureMonitorTargetEnabled?: undefined | false | true'
      return:
        type:
          - undefined | false | true
    package: '@azure/arm-sql'
  - uid: '@azure/arm-sql.ExtendedServerBlobAuditingPolicy.isStorageSecondaryKeyInUse'
    name: isStorageSecondaryKeyInUse
    fullName: isStorageSecondaryKeyInUse
    children: []
    langs:
      - typeScript
    type: property
    summary: <span data-ttu-id="6b180-126">指定 storageAccountAccessKey 值是否是存储的辅助密钥。</span><span class="sxs-lookup"><span data-stu-id="6b180-126">Specifies whether storageAccountAccessKey value is the storage's secondary key.</span></span>
    optional: true
    syntax:
      content: 'isStorageSecondaryKeyInUse?: undefined | false | true'
      return:
        type:
          - undefined | false | true
    package: '@azure/arm-sql'
  - uid: '@azure/arm-sql.ExtendedServerBlobAuditingPolicy.name'
    name: name
    fullName: name
    children: []
    langs:
      - typeScript
    type: property
    summary: |-
      <span data-ttu-id="6b180-127">资源名称。</span><span class="sxs-lookup"><span data-stu-id="6b180-127">Resource name.</span></span>
      <span data-ttu-id="6b180-128">**注意：此属性将不序列化。它仅可以由服务器填充。**</span><span class="sxs-lookup"><span data-stu-id="6b180-128">**NOTE: This property will not be serialized. It can only be populated by the server.**</span></span>
    optional: true
    syntax:
      content: 'name?: undefined | string'
      return:
        type:
          - undefined | string
    package: '@azure/arm-sql'
  - uid: '@azure/arm-sql.ExtendedServerBlobAuditingPolicy.predicateExpression'
    name: predicateExpression
    fullName: predicateExpression
    children: []
    langs:
      - typeScript
    type: property
    summary: <span data-ttu-id="6b180-129">指定条件的 where 子句时创建审核。</span><span class="sxs-lookup"><span data-stu-id="6b180-129">Specifies condition of where clause when creating an audit.</span></span>
    optional: true
    syntax:
      content: 'predicateExpression?: undefined | string'
      return:
        type:
          - undefined | string
    package: '@azure/arm-sql'
  - uid: '@azure/arm-sql.ExtendedServerBlobAuditingPolicy.retentionDays'
    name: retentionDays
    fullName: retentionDays
    children: []
    langs:
      - typeScript
    type: property
    summary: <span data-ttu-id="6b180-130">指定的天数保留审核中记录的存储帐户中。</span><span class="sxs-lookup"><span data-stu-id="6b180-130">Specifies the number of days to keep in the audit logs in the storage account.</span></span>
    optional: true
    syntax:
      content: 'retentionDays?: undefined | number'
      return:
        type:
          - undefined | number
    package: '@azure/arm-sql'
  - uid: '@azure/arm-sql.ExtendedServerBlobAuditingPolicy.state'
    name: state
    fullName: state
    children: []
    langs:
      - typeScript
    type: property
    summary: '<span data-ttu-id="6b180-131">指定策略的状态。</span><span class="sxs-lookup"><span data-stu-id="6b180-131">Specifies the state of the policy.</span></span> <span data-ttu-id="6b180-132">如果启用状态，则 storageEndpoint 或 isAzureMonitorTargetEnabled 所需。</span><span class="sxs-lookup"><span data-stu-id="6b180-132">If state is Enabled, storageEndpoint or isAzureMonitorTargetEnabled are required.</span></span> <span data-ttu-id="6b180-133">可能的值包括：'' Enabled''，''Disabled''</span><span class="sxs-lookup"><span data-stu-id="6b180-133">Possible values include: ''Enabled'', ''Disabled''</span></span>'
    syntax:
      content: 'state: BlobAuditingPolicyState'
      return:
        type:
          - '@azure/arm-sql.BlobAuditingPolicyState'
    package: '@azure/arm-sql'
  - uid: '@azure/arm-sql.ExtendedServerBlobAuditingPolicy.storageAccountAccessKey'
    name: storageAccountAccessKey
    fullName: storageAccountAccessKey
    children: []
    langs:
      - typeScript
    type: property
    summary: '<span data-ttu-id="6b180-134">指定审核存储帐户的标识符键。</span><span class="sxs-lookup"><span data-stu-id="6b180-134">Specifies the identifier key of the auditing storage account.</span></span> <span data-ttu-id="6b180-135">如果启用状态，并且指定 storageEndpoint，则需要 storageAccountAccessKey。</span><span class="sxs-lookup"><span data-stu-id="6b180-135">If state is Enabled and storageEndpoint is specified, storageAccountAccessKey is required.</span></span>'
    optional: true
    syntax:
      content: 'storageAccountAccessKey?: undefined | string'
      return:
        type:
          - undefined | string
    package: '@azure/arm-sql'
  - uid: '@azure/arm-sql.ExtendedServerBlobAuditingPolicy.storageAccountSubscriptionId'
    name: storageAccountSubscriptionId
    fullName: storageAccountSubscriptionId
    children: []
    langs:
      - typeScript
    type: property
    summary: <span data-ttu-id="6b180-136">指定的 blob 存储订阅 id。</span><span class="sxs-lookup"><span data-stu-id="6b180-136">Specifies the blob storage subscription Id.</span></span>
    optional: true
    syntax:
      content: 'storageAccountSubscriptionId?: undefined | string'
      return:
        type:
          - undefined | string
    package: '@azure/arm-sql'
  - uid: '@azure/arm-sql.ExtendedServerBlobAuditingPolicy.storageEndpoint'
    name: storageEndpoint
    fullName: storageEndpoint
    children: []
    langs:
      - typeScript
    type: property
    summary: '<span data-ttu-id="6b180-137">指定 blob 存储终结点 (例如 https://MyAccount.blob.core.windows.net) 。</span><span class="sxs-lookup"><span data-stu-id="6b180-137">Specifies the blob storage endpoint (e.g. https://MyAccount.blob.core.windows.net).</span></span> <span data-ttu-id="6b180-138">如果启用了状态，则需要 storageEndpoint。</span><span class="sxs-lookup"><span data-stu-id="6b180-138">If state is Enabled, storageEndpoint is required.</span></span>'
    optional: true
    syntax:
      content: 'storageEndpoint?: undefined | string'
      return:
        type:
          - undefined | string
    package: '@azure/arm-sql'
  - uid: '@azure/arm-sql.ExtendedServerBlobAuditingPolicy.type'
    name: type
    fullName: type
    children: []
    langs:
      - typeScript
    type: property
    summary: |-
      <span data-ttu-id="6b180-139">资源类型。</span><span class="sxs-lookup"><span data-stu-id="6b180-139">Resource type.</span></span>
      <span data-ttu-id="6b180-140">**注意：此属性将不序列化。它仅可以由服务器填充。**</span><span class="sxs-lookup"><span data-stu-id="6b180-140">**NOTE: This property will not be serialized. It can only be populated by the server.**</span></span>
    optional: true
    syntax:
      content: 'type?: undefined | string'
      return:
        type:
          - undefined | string
    package: '@azure/arm-sql'
references:
  - uid: '@azure/arm-sql.ProxyResource'
    name: ProxyResource
    spec.typeScript:
      - name: ProxyResource
        fullName: ProxyResource
        uid: '@azure/arm-sql.ProxyResource'
  - uid: '@azure/arm-sql.BlobAuditingPolicyState'
    name: BlobAuditingPolicyState
    spec.typeScript:
      - name: BlobAuditingPolicyState
        fullName: BlobAuditingPolicyState
        uid: '@azure/arm-sql.BlobAuditingPolicyState'